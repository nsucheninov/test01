{
    "handler": "Microsoft.Compute.MultiVm",
    "version": "0.1.2-preview",
    "parameters": {
        "basics": [
            {
                "name": "dashboardName",
                "type": "Microsoft.Common.TextBox",
                "label": "Dashboad Name",
                "defaultValue": "IBX Power Monitoring",
                "toolTip": "Use only allowed characters",
                "constraints": {
                  "required": true,
                  "regex": "^[a-z0-9A-Z\\s]+$",
                  "validationMessage": "Only letters, numbers and space are allowed."
                }                
            },
            {
                "name": "omsWorkspaceRegion",
                "type": "Microsoft.Common.DropDown",
                "label": "Log Analytics Workspace Region",
                "toolTip": "Select region from the list",
                "defaultValue": "East US",
                "constraints": {
                    "allowedValues": [
                        {
                            "label": "Australia Southeast",
                            "value": "australiasoutheast"
                        },
                        {
                            "label": "Canada Central",
                            "value": "canadacentral"
                        },
                        {
                            "label": "Central India",
                            "value": "centralindia"
                        },
                        {
                            "label": "East US",
                            "value": "eastus"
                        },
                        {
                            "label": "Japan East",
                            "value": "japaneast"
                        },
                        {
                            "label": "Southeast Asia",
                            "value": "southeastasia"
                        },
                        {
                            "label": "UK South",
                            "value": "uksouth"
                        },
                        {
                            "label": "West Europe",
                            "value": "westeurope"
                        }
                    ],
                    "required": true
                },
                "visible": true           }
        ],
        "steps": [
            {
                "name": "dcimSettings",
                "label": "DCIM Settings",
                "subLabel": {
                    "preValidation": "Configure the DCIM settings",
                    "postValidation": "Done"                    
                },
                "bladeTitle": "DCIM Settings",
                "elements": [
                    {
                        "name": "credentialsSection",
                        "type": "Microsoft.Common.Section",
                        "label": "Equinix Credentials",
                        "elements": [
                        {
                            "name": "username",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Username",
                            "toolTip": "Use only allowed user name",
                            "constraints": {
                                "required": true
                            },
                            "visible": true                        
                        },
                        {
                            "name": "password",
                            "type": "Microsoft.Common.PasswordBox",
                            "label": {
                            "password": "Password"
                            },
                            "toolTip": "Use only allowed password",
                            "options": {
                                "hideConfirmation": true
                            },
                            "constraints": {
                                "required": true
                            },
                            "visible": true                        
                        }
                        ],
                        "visible": true                        
                    },
                    {
                        "name": "parametersSection",
                        "type": "Microsoft.Common.Section",
                        "label": "Equinix API Parameters",
                        "elements": [
                        {
                            "name": "accountNo",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Account Number",
                            "toolTip": "Use only allowed account number",
                            "constraints": {
                                "required": true
                            },
                            "visible": true
                        },
                        {
                            "name": "ibxName",
                            "type": "Microsoft.Common.TextBox",
                            "label": "IBX Name",
                            "defaultValue": "CH1",
                            "toolTip": "Use only allowed IBX name",
                            "constraints": {
                                "required": true
                            },
                            "visible": true
                        }
                    ],
                    "visible": true 
                    }
                ]
            },
            {
                "name": "alertSettings",
                "label": "Alert Settings",
                "subLabel": {
                    "preValidation": "Configure the alert settings",
                    "postValidation": "Done"                    
                },
                "bladeTitle": "Alert Settings",
                "elements": [
                    {
                        "name": "emailSection",
                        "type": "Microsoft.Common.Section",
                        "label": "Email Alert Notification",
                        "elements": [
                        {
                            "name": "emailAddress",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Email Address",
                            "toolTip": "Use only allowed email address",
                            "constraints": {
                            "required": true,
                            "regex": "^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$",
                            "validationMessage": "Only valid e-mail address is allowed."
                            }                
                        }
                    ],
                    "visible": true
                    },

                    {
                        "name": "smsSection",
                        "type": "Microsoft.Common.Section",
                        "label": "SMS Alert Notification",
                        "elements": [
                        {
                            "name": "smsCountryCode",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Country Code",
                            "toolTip": "Select country code from the list",
                            "defaultValue": "1",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "1",
                                        "value": "1"
                                    },
                                    {
                                        "label": "27",
                                        "value": "27"
                                    },
                                    {   
                                        "label": "31",
                                        "value": "31"
                                    },
                                    {
                                        "label": "33",
                                        "value": "33"
                                    },
                                    {
                                        "label": "44",
                                        "value": "44"
                                    },
                                    {
                                        "label": "49",
                                        "value": "49"
                                    },
                                    {
                                        "label": "55",
                                        "value": "55"
                                    },
                                    {
                                        "label": "61",
                                        "value": "61"
                                    },
                                    {
                                        "label": "65",
                                        "value": "65"
                                    },
                                    {
                                        "label": "81",
                                        "value": "81"
                                    },
                                    {
                                        "label": "82",
                                        "value": "82"
                                    },
                                    {
                                        "label": "86",
                                        "value": "86"
                                    },
                                    {
                                        "label": "91",
                                        "value": "91"
                                    },
                                    {
                                        "label": "353",
                                        "value": "353"
                                    },
                                    {
                                        "label": "852",
                                        "value": "852"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "smsPhoneNumber",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Mobile Number",
                            "toolTip": "Use only allowed mobile number",
                            "constraints": {
                                "required": false,
                                "regex": "^(\\(?\\+?[0-9]*\\)?)?[0-9_\\- \\(\\)]*$",
                                "validationMessage": "Only valid mobile number is allowed."
                            },
                            "visible": true
                        }
                        ],
                        "visible": true
                    },
                    {
                        "name": "voiceSection",
                        "type": "Microsoft.Common.Section",
                        "label": "Voice Alert Notification",
                        "elements": [
                        {
                            "name": "voiceCountryCode",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Country Code",
                            "toolTip": "Select country code from the list",
                            "defaultValue": "1",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "1",
                                        "value": "1"
                                    },
                                    {
                                        "label": "27",
                                        "value": "27"
                                    },
                                    {   
                                        "label": "31",
                                        "value": "31"
                                    },
                                    {
                                        "label": "33",
                                        "value": "33"
                                    },
                                    {
                                        "label": "44",
                                        "value": "44"
                                    },
                                    {
                                        "label": "49",
                                        "value": "49"
                                    },
                                    {
                                        "label": "55",
                                        "value": "55"
                                    },
                                    {
                                        "label": "61",
                                        "value": "61"
                                    },
                                    {
                                        "label": "65",
                                        "value": "65"
                                    },
                                    {
                                        "label": "81",
                                        "value": "81"
                                    },
                                    {
                                        "label": "82",
                                        "value": "82"
                                    },
                                    {
                                        "label": "86",
                                        "value": "86"
                                    },
                                    {
                                        "label": "91",
                                        "value": "91"
                                    },
                                    {
                                        "label": "353",
                                        "value": "353"
                                    },
                                    {
                                        "label": "852",
                                        "value": "852"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "voicePhoneNumber",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Phone Number",
                            "toolTip": "Use only allowed phone number",
                            "constraints": {
                                "required": false,
                                "regex": "^(\\(?\\+?[0-9]*\\)?)?[0-9_\\- \\(\\)]*$",
                                "validationMessage": "Only valid phone number is allowed."
                            },
                            "visible": true
                        }
                    ],
                    "visible": true
                    }
                ]
            }
        ],
        "outputs": {
            "location": "[location()]",
            "omsWorkspaceRegion": "[basics('omsWorkspaceRegion')]",
            "dashboardName": "[basics('dashboardName')]",
            "dcimUsername": "[steps('dcimSettings').credentialsSection.username]",
            "dcimPassword": "[steps('dcimSettings').credentialsSection.password]",
            "dcimAccountNo": "[steps('dcimSettings').parametersSection.accountNo]",
            "dcimIBX": "[steps('dcimSettings').parametersSection.ibxName]",
            "emailAddress": "[steps('alertSettings').emailSection.emailAddress]",
            "smsCountryCode": "[steps('alertSettings').smsSection.smsCountryCode]",
            "smsPhoneNumber": "[steps('alertSettings').smsSection.smsPhoneNumber]",
            "voiceCountryCode": "[steps('alertSettings').voiceSection.voiceCountryCode]",
            "voicePhoneNumber": "[steps('alertSettings').voiceSection.voicePhoneNumber]"
        }
    }
}